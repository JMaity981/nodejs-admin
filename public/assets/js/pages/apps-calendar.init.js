const getElement=e=>document.getElementById(e),calendarEl=getElement("calendar"),checkbox=getElement("drop-remove"),businessHoursCheckbox=getElement("businessCalendar"),weekNumberCalendar=getElement("weekNumberCalendar"),modalTitle=getElement("modal-title"),formEvent=getElement("form-event"),eventModal=getElement("event-modal"),eventTitleInput=getElement("event-title"),eventCategoryInput=getElement("event-category"),deleteEventBtn=getElement("btn-delete-event"),saveEventBtn=getElement("btn-save-event"),localeSelect=getElement("locale-select"),eventModalCloseBtn=getElement("eventModal-close");let selectedEvent=null,newEventData=null;const initializeDraggable=()=>{const e=getElement("external-events");new FullCalendar.Draggable(e,{itemSelector:".external-event",eventData:e=>({title:e.innerText,start:new Date,className:e.getAttribute("data-class")})})},getDefaultEvents=()=>{const e=new Date,t=e.getDate(),n=e.getMonth(),a=e.getFullYear();return[{title:"All Day Event",start:new Date(a,n,1),className:"w-[100%] text-purple-500 !bg-purple-100 dark:!bg-purple-500/20 border-none rounded-md py-1.5 px-3"},{title:"Long Event",start:new Date(a,n,t-5),end:new Date(a,n,t-2),className:"!text-sky-500 w-[100%] !bg-sky-100 dark:!bg-sky-500/20 border-none rounded-md py-1.5 px-3"},{id:999,title:"Repeating Event",start:new Date(a,n,t-3,16,0),allDay:!1,className:"text-yellow-500 w-[100%] !bg-yellow-100 dark:!bg-yellow-500/20 border-none rounded-md py-1.5 px-3"},{id:999,title:"Repeating Event",start:new Date(a,n,t+4,16,0),allDay:!1,className:"w-[100%] text-custom-500 !bg-custom-100 dark:!bg-custom-500/20 border-none rounded-md py-1.5 px-3"},{title:"Meeting",start:new Date(a,n,t,10,30),allDay:!1,className:"text-green-500 w-[100%] !bg-green-100 dark:!bg-green-500/20 border-none rounded-md py-1.5 px-3"},{title:"Lunch",start:new Date(a,n,t,12,0),end:new Date(a,n,t,14,0),allDay:!1,className:"text-purple-500 w-[100%] !bg-purple-100 dark:!bg-purple-500/20 border-none rounded-md py-1.5 px-3"},{title:"Birthday Party",start:new Date(a,n,t+1,19,0),end:new Date(a,n,t+1,22,30),allDay:!1,className:"w-[100%] text-sky-500 !bg-sky-100 dark:!bg-sky-500/20 border-none rounded-md py-1.5 px-3"},{title:"Click for Google",start:new Date(a,n,28),end:new Date(a,n,29),url:"http://google.com/",className:"w-[100%] text-custom-500 !bg-custom-100 dark:!bg-custom-500/20 border-none rounded-md py-1.5 px-3"}]},addNewEvent=e=>{formEvent.classList.remove("was-validated"),formEvent.reset(),selectedEvent=null,modalTitle.innerText="Add Event",newEventData=e},getInitialView=()=>{const e=window.innerWidth;return e>=768&&e<1200?"timeGridWeek":e<=768?"listMonth":"dayGridMonth"},getBusinessHours=()=>businessHoursCheckbox.checked?{daysOfWeek:[1,2,3,4,5],startTime:"10:00",endTime:"18:00"}:[],weekNumber=()=>weekNumberCalendar.checked;businessHoursCheckbox.addEventListener("change",(()=>calendar.setOption("businessHours",getBusinessHours()))),weekNumberCalendar.addEventListener("change",(()=>calendar.setOption("weekNumbers",weekNumber())));const calendar=new FullCalendar.Calendar(calendarEl,{timeZone:"local",editable:!0,droppable:!0,selectable:!0,weekNumbers:weekNumber(),initialView:getInitialView(),themeSystem:"tailwindcss",headerToolbar:{left:"prev,next,today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},drop:e=>checkbox.checked&&e.draggedEl.parentNode.removeChild(e.draggedEl),businessHours:getBusinessHours(),windowResize:e=>calendar.changeView(getInitialView()),eventClick:e=>{eventModal.classList.remove("hidden"),document.getElementById("calendarBtn").click(),formEvent.reset(),eventTitleInput.value="",selectedEvent=e.event,eventTitleInput.value=selectedEvent.title,eventCategoryInput.value=selectedEvent.classNames[0],deleteEventBtn.classList.remove("hidden"),newEventData=null,saveEventBtn.innerText="Edit Event"},dateClick:e=>{addNewEvent(e),eventModal.classList.remove("hidden"),document.getElementById("calendarBtn").click(),deleteEventBtn.classList.add("hidden")},events:getDefaultEvents()}),changeLocale=()=>calendar.setOption("locale",localeSelect.value);formEvent.addEventListener("submit",(e=>{e.preventDefault();const t=eventTitleInput.value,n=eventCategoryInput.value,a=document.getElementsByClassName("needs-validation");if(!1===a[0].checkValidity())a[0].classList.add("was-validated");else{if(selectedEvent)selectedEvent.setProp("title",t),selectedEvent.setProp("classNames",[n]);else{const e={title:t,start:newEventData.date,allDay:newEventData.allDay,className:n};calendar.addEvent(e)}eventModalCloseBtn.click()}})),deleteEventBtn.addEventListener("click",(()=>{selectedEvent&&(selectedEvent.remove(),selectedEvent=null,eventModalCloseBtn.click())})),calendar.render(),initializeDraggable();