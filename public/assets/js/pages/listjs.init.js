var checkAll=document.getElementById("checkAll");checkAll&&checkAll.addEventListener("click",(function(){var e=document.querySelectorAll('.form-check-all input[type="checkbox"]');Array.from(e).forEach((function(e){e.checked=checkAll.checked,e.checked?e.closest("tr").classList.add("table-active"):e.closest("tr").classList.remove("table-active")}))}));var perPage=5,editlist=!1,options={valueNames:["id","customer_name","email","date","phone","status"],page:perPage,pagination:!0,plugins:[ListPagination({left:2,right:2})]};if(document.getElementById("customerList"))var customerList=new List("customerList",options).on("updated",(function(e){document.getElementsByClassName("noresult")&&document.getElementsByClassName("noresult")[0]&&(0==e.matchingItems.length?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none",e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block");var t=1==e.i,i=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),i&&document.querySelector(".pagination-next").classList.add("disabled");const a=document.querySelector(".total-Employs"),n=customerList.listContainer.querySelector(".total-records"),s=customerList.listContainer.querySelector(".showing");a&&(a.innerHTML=customerList.items.length),n&&(n.innerHTML=customerList.items.length),s&&(s.innerHTML=customerList.visibleItems.length),document.querySelector(".pagination-next").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&null!=document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click()})),document.querySelector(".pagination-prev").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&null!=document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click()})),refreshCallbacks()}));const xhttp=new XMLHttpRequest;xhttp.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach((e=>{customerList.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary id">#VZ'+e.id+"</a>",customer_name:e.customer_name,email:e.email,date:e.date,phone:e.phone,status:isStatus(e.status)}),customerList.sort("id",{order:"desc"}),refreshCallbacks()})),customerList.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary id">#VZ2101</a>')},xhttp.open("GET","assets/json/table-customer-list.json"),xhttp.send(),isCount=(new DOMParser).parseFromString(customerList.items.slice(-1)[0]._values.id,"text/html");var isValue=isCount.body.firstElementChild.innerHTML,idField=document.getElementById("id-field"),customerNameField=document.getElementById("customername-field"),emailField=document.getElementById("email-field"),dateField=document.getElementById("date-field"),phoneField=document.getElementById("phone-field"),statusField=document.getElementById("status-field"),addBtn=document.getElementById("add-btn"),editBtn=document.getElementById("edit-btn"),editBtns=document.getElementsByClassName("edit-item-btn");function filterContact(e){var t=e;customerList.filter((function(e){matchData=(new DOMParser).parseFromString(e.values().status,"text/html");var i=matchData.body.firstElementChild.innerHTML;return"All"==i||"All"==t||i==t})),customerList.update()}function updateList(){var e=document.querySelector("input[name=status]:checked").value;data=userList.filter((function(t){return"All"==e||t.values().sts==e})),userList.update()}refreshCallbacks(),document.getElementById("showModal")&&(document.getElementById("showModal").addEventListener("show.bs.modal",(function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Customer",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Customer",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Customer"):(document.getElementById("exampleModalLabel").innerHTML="List Customer",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")})),ischeckboxcheck(),document.getElementById("showModal").addEventListener("hidden.bs.modal",(function(){clearFields()}))),document.querySelector("#customerList").addEventListener("click",(function(){ischeckboxcheck()}));var table=document.getElementById("customerTable"),tr=table.getElementsByTagName("tr"),trlist=table.querySelectorAll(".list tr"),count=11,forms=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(forms).forEach((function(e){e.addEventListener("submit",(function(t){if(e.checkValidity())if(t.preventDefault(),""===customerNameField.value||""===emailField.value||""===dateField.value||""===phoneField.value||editlist){if(""!==customerNameField.value&&""!==emailField.value&&""!==dateField.value&&""!==phoneField.value&&editlist){var i=customerList.get({id:idField.value});Array.from(i).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html"),isid.body.firstElementChild.innerHTML==itemId&&e.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary id">'+idField.value+"</a>",customer_name:customerNameField.value,email:emailField.value,date:dateField.value,phone:phoneField.value,status:isStatus(statusField.value)})})),clearFields(),Swal.fire({position:"center",icon:"success",title:"Customer updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}}else customerList.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary id">#VZ'+count+"</a>",customer_name:customerNameField.value,email:emailField.value,date:dateField.value,phone:phoneField.value,status:isStatus(statusField.value)}),customerList.sort("id",{order:"desc"}),refreshCallbacks(),clearFields(),filterContact("All"),count++,Swal.fire({position:"center",icon:"success",title:"Customer inserted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0});else t.preventDefault(),t.stopPropagation()}),!1)}));var statusVal=new Choices(statusField);function isStatus(e){switch(e){case"Active":return'<span class="px-2.5 py-0.5 inline-block text-xs font-medium rounded border bg-green-100 border-transparent text-green-500 dark:bg-green-500/20 dark:border-transparent">'+e+"</span>";case"Block":return'<span class="px-2.5 py-0.5 inline-block text-xs font-medium rounded border bg-red-100 border-transparent text-red-500 dark:bg-red-500/20 dark:border-transparent">'+e+"</span>"}}function ischeckboxcheck(){Array.from(document.getElementsByName("checkAll")).forEach((function(e){e.addEventListener("click",(function(e){e.target.checked?e.target.closest("tr").classList.add("table-active"):e.target.closest("tr").classList.remove("table-active")}))}))}function refreshCallbacks(){var e=document.getElementsByClassName("remove-item-btn");e&&Array.from(e).forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var t=customerList.get({id:itemId});Array.from(t).forEach((function(e){deleteid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=deleteid.body.firstElementChild;deleteid.body.firstElementChild.innerHTML==itemId&&document.getElementById("delete-record").addEventListener("click",(function(){customerList.remove("id",t.outerHTML)}))}))}))})),editBtns&&Array.from(editBtns).forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var t=customerList.get({id:itemId});Array.from(t).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=isid.body.firstElementChild.innerHTML;if(t==itemId){editlist=!0,idField.value=t,customerNameField.value=e._values.customer_name,emailField.value=e._values.email,dateField.value=e._values.date,phoneField.value=e._values.phone,statusVal&&statusVal.destroy(),statusVal=new Choices(statusField),val=(new DOMParser).parseFromString(e._values.status,"text/html");var i=val.body.firstElementChild.innerHTML;statusVal.setChoiceByValue(i),flatpickr("#date-field",{dateFormat:"d M, Y",defaultDate:e._values.date})}}))}))}))}function clearFields(){customerNameField.value="",emailField.value="",dateField.value="",phoneField.value=""}function deleteMultiple(){var e=[],t=document.getElementsByName("chk_child");if(Array.from(t).forEach((function(t){if(1==t.checked){var i=t.parentNode.parentNode.querySelector(".id a").innerHTML;e.push(i)}})),e.length>0){if(!confirm("Are you sure you want to delete this?"))return!1;e.forEach((function(e){customerList.remove("id",`<a href="javascript:void(0);" class="fw-medium link-primary id">${e}</a>`)})),document.getElementById("checkAll").checked=!1}else Swal.fire({title:"Please select at least one checkbox",customClass:{confirmButton:"text-white btn bg-sky-500 border-sky-500 hover:text-white hover:bg-sky-600 hover:border-sky-600 focus:text-white focus:bg-sky-600 focus:border-sky-600 focus:ring focus:ring-sky-100 active:text-white active:bg-sky-600 active:border-sky-600 active:ring active:ring-sky-100 dark:ring-sky-400/20"},buttonsStyling:!1,showCloseButton:!0})}